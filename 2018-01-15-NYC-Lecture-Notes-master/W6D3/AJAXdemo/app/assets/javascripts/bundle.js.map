{"version":3,"sources":["webpack:///webpack/bootstrap 831f7d0dbb86dd9d0e81","webpack:///./frontend/gifomatic.js","webpack:///./frontend/gif_api_util.js"],"names":["GifApiUtil","appendGif","$","empty","data","newGif","append","setEventHandlers","on","e","preventDefault","fetchNewGif","saveGif","fetchSavedGif","$input","queryString","val","newGifAJAX","then","response","url","image_url","title","gif","saveGifAJAX","responseJSON","success","error","fetchSavedGifAJAX","catch","ajax","method","key"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 831f7d0dbb86dd9d0e81","import * as GifApiUtil from \"./gif_api_util\";\n\nconst appendGif = newGif => {\n  $(\".gif-display\").empty();\n  $(\".gif-display\").data(\"url\", newGif);\n  $(\".gif-display\").append($(`<img class=\"gif\" src=${newGif} />`));\n};\n\nconst setEventHandlers = () => {\n  $(\".clear\").on(\"click\", () => {\n    $(\".gif-display\").empty();\n  });\n\n  // preventDefault prevents requests being made to the server\n  $(\"#new-gif-form\").on(\"submit\", e => {\n    e.preventDefault();\n    fetchNewGif();\n  });\n\n  $(\"#save-gif-form\").on(\"submit\", e => {\n    e.preventDefault();\n    saveGif();\n  });\n\n  $(\"#old-gif-form\").on(\"submit\", e => {\n    e.preventDefault();\n    fetchSavedGif();\n  });\n};\n\n$(() => {\n  setEventHandlers();\n});\n\n// ------------- GIF ACTIONS - fetchNew, save, and fetchSaved ---------------\n\nconst fetchNewGif = () => {\n  const $input = $(\"#new-gif-query\");\n  const queryString = $input.val();\n  $input.val(\"\");\n\n  // Initiate AJAX call to GIPHY API, take response and put on the DOM\n  // AJAX requests are asynch, so code after the request would get run before the request gets completed\n  // solution: promises!\n  // can only chain .then on promises, prommises\n  GifApiUtil.newGifAJAX(queryString).then( (response) => {\n    const url = response.data.image_url;\n    // have access to appendGif bc its being closed over\n    appendGif(url);\n  });\n  \n};\n\nconst saveGif = e => {\n  const $input = $(\"#save-gif-title\");\n  const title = $input.val();\n  $input.val(\"\");\n\n  const gif = {\n    // below is a shortcut for title: title\n    title,\n    url: $(\".gif-display\").data(\"url\")\n  };\n\n  // Initiate AJAX request to Rails backend, give a message if successful\n  // give an error if request was unsuccessful\n  // promises accept two arguments: a success callback, and a non-success callback (stuff to do if unsuccessful request)\n  GifApiUtil.saveGifAJAX(gif).then( \n    () => {\n      $('.messages').empty();\n      $('.messages').append('Gif Saved!');\n    },\n    (response) => {\n      $('.messages').empty();\n      $('.messages').append(response.responseJSON[0]);\n    }\n  );\n};\n\nconst fetchSavedGif = () => {\n  const $input = $(\"#old-gif-query\");\n  const title = $input.val();\n  $input.val(\"\");\n\n  // Initate AJAX request to Rails backend, add gif to the DOM if successful\n  // show errors if request was unsuccessful\n  const success = (response) => {\n    appendGif(response.url);\n  };\n  const error = (response) => {\n    $('.messages').empty();\n    $('.messages').append(response.responseJSON[0]);\n  };\n  // catch catches any errors not caught by any of the previous promises \n  GifApiUtil.fetchSavedGifAJAX(title).then(success).catch(error);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/gifomatic.js","export const newGifAJAX = (queryString) => {\n  // $.ajax returns a promise\n  return $.ajax({\n    method: \"GET\",\n    url: `https://api.giphy.com/v1/gifs/random?tag=${queryString}&api_key=9IfxO6R6fpEZMAdqdw66QUgQdPejVIAW&rating=G`\n  });\n};\n\nexport const saveGifAJAX = (gif) => {\n  const key = 'gif';\n  return $.ajax({\n    method: \"POST\",\n    url: \"/gifs\",\n    // want key of gif to structure params as our controller expects them\n    // js object keys are automatically converted to strings unless you interpolate in brackets to specify you want the value of that variable\n    // data: {[key]: gif}\n    // below is an ES6 shortcut for above. works bc variable name is same as key name\n    data: { gif }\n  });\n};\n\nexport const fetchSavedGifAJAX = (title) => {\n  return $.ajax({\n    method: \"GET\",\n    url: `/gifs/${title}`,\n    // can also specify success and error callbacks here, but we abstracted them to when we make the request\n    // success: successCallback,\n    // error: errorCallback\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/gif_api_util.js"],"sourceRoot":""}